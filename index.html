<!DOCTYPE html>
<html>
  <head>
    <title> Login </title>
  </head>
  <body>
    <form type='submit' action='javascript:getAllUsers()' >
      <button type='submit'>Get All Users</button>
    </form><br><br><br>
    <form id='update-user-form' type='submit' action='javascript:updateUser()' >
      Email <input name='email' type='email' value='friday99@outlook.it'><br>
      Password <input name='pwd' type='password' value='arun1234'><br>
      Confirm Password <input name='pwd_confirm' type='password' value='arun1234'><br>
      First Name <input name='firstName' type='text' value='Arun'><br>
      Last Name <input name='lastName' type='text' value='Mathiyalakan'><br>
      Username <input name='username' type='text' value='arun99.dev'><br>
      <button type='submit'>Update User</button>
    </form><br><br><br>
    <form id='login-form' type='submit' action='javascript:login()' >
      Email <input name='email' type='email' value='friday99@outlook.it'><br>
      Password <input name='pwd' type='password' value='arun1234'><br>
      <button type='submit'>Login</button>
    </form><br><br><br>
    <form id='sign-up-form' type='submit' action='javascript:signUp()' >
      Email <input name='email' type='email' value='friday99@outlook.it'><br>
      Password <input name='pwd' type='password' value='arun1234'><br>
      Confirm Password <input name='pwd_confirm' type='password' value='arun1234'><br>
      First Name <input name='firstName' type='text' value='Arun'><br>
      Last Name <input name='lastName' type='text' value='Mathiyalakan'><br>
      <button type='submit'>Sign Up</button>
    </form><br><br><br>
    <button onclick='javascript:logout()'>Logout</button><br><br><br>
  </body>
  <script>
    const getAllUsers = () => {
      fetch('./api/user/getAllUsers.php')
      .then(response => response.json()).then(result => { console.log(result) })
    }

    const updateUser = () => {
      const form = document.getElementById('update-user-form')
      fetch('./api/user/updateUser.php', { method: 'POST', body : new FormData(form) })
      .then(response => response.json()).then(result => { console.log(result) })
    }

    const login = () => {
      const form = document.getElementById('login-form')
      fetch('./api/auth/login.php', { method: 'POST', body : new FormData(form)})
      .then(response => response.json()).then(result => { console.log(result) })
    }

    const signUp = () => {
      const form = document.getElementById('sign-up-form')
      fetch('./api/auth/signUp.php', { method: 'POST', body : new FormData(form) })
      .then(response => response.json()).then(result => { console.log(result) })
    }

    const logout = () => {
      fetch('./api/auth/logout.php', { method: 'POST' })
      .then(response => response.json()).then(result => { console.log(result) })
    }
  </script>
</html>

<!-- TODO:
  - error handling
  - user auth checker
  - session
  - remove sensitive data from response

  - mutations:
    - insert:
      - review (USER)
      - register (USER)
      - star (ADMIN)
      - sub (ADMIN)
      - constellation (ADMIN)
    - delete:
      - review (USER)
      - user (ADMIN)
      - star (ADMIN)
      - sub (ADMIN)
      - constellation (ADMIN)
    - update:
      - review (USER)
      - user (USER)
      - user (ADMIN)
      - star (ADMIN)
      - sub (ADMIN)
      - constellation (ADMIN)
-->
